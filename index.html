<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web to Form</title>
    <script>
        let isCodeVerified = false;

        function verifyCode() {
            const code = document.getElementById("codeInput").value;
            fetch(`http://localhost:5000/?code=${code}`)
                .then(response => {
                    if (response.ok) {
                        isCodeVerified = true;
                        document.getElementById("verificationSection").style.display = "none";
                        document.getElementById("buttonSection").style.display = "block";
                        alert("Code verified successfully!");
                    } else {
                        alert("Invalid code. Please try again.");
                    }
                })
                .catch(error => alert("Error: " + error));
        }

        function sendRequest() {
            if (isCodeVerified) {
                fetch(`http://localhost:5000/?code=verified`)
                    .then(response => response.text())
                    .then(data => alert(data))
                    .catch(error => alert("Error: " + error));
            } else {
                alert("Please verify the code first.");
            }
        }
    </script>
</head>
<body>
    <!-- Code Verification Section -->
    <div id="verificationSection">
        <h2>Enter Code to Continue</h2>
        <input type="text" id="codeInput" placeholder="Enter Code" />
        <button onclick="verifyCode()">Verify</button>
    </div>

    <!-- Button Section (Hidden Initially) -->
    <div id="buttonSection" style="display: none;">
        <h2>Welcome</h2>
        <button onclick="sendRequest()">Click Me</button>
    </div>
</body>
</html>
